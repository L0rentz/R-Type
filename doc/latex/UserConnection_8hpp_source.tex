\hypertarget{UserConnection_8hpp_source}{}\doxysection{User\+Connection.\+hpp}
\label{UserConnection_8hpp_source}\index{src/server/UserConnection.hpp@{src/server/UserConnection.hpp}}
\mbox{\hyperlink{UserConnection_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{** EPITECH PROJECT, 2021}}
\DoxyCodeLine{3 \textcolor{comment}{** Asio}}
\DoxyCodeLine{4 \textcolor{comment}{** File description:}}
\DoxyCodeLine{5 \textcolor{comment}{** connection singeltone}}
\DoxyCodeLine{6 \textcolor{comment}{*/}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef TCPCONNECTION\_HPP}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define TCPCONNECTION\_HPP}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <ctime>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <asio.hpp>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{AsioTcpServ_8hpp}{AsioTcpServ.hpp}}"{}}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{SEPParsor_8hpp}{SEPParsor.hpp}}"{}}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{keyword}{class }\mbox{\hyperlink{classAsioTcpServ}{AsioTcpServ}};}
\DoxyCodeLine{20 \textcolor{keyword}{class }\mbox{\hyperlink{classUserConnection}{UserConnection}};}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{typedef} std::shared\_ptr<UserConnection> \mbox{\hyperlink{UserConnection_8hpp_a753e7540e06be2c96dffa1a345fa805f}{userConnectionPointer}};}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{classUserConnection}{UserConnection}} : \textcolor{keyword}{public} std::enable\_shared\_from\_this<UserConnection>}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{26 \textcolor{keyword}{public}:}
\DoxyCodeLine{27 }
\DoxyCodeLine{37     \textcolor{keyword}{static} \mbox{\hyperlink{AsioTcpServ_8hpp_a753e7540e06be2c96dffa1a345fa805f}{userConnectionPointer}} \mbox{\hyperlink{classUserConnection_a573ec3c5d2e6f3d866b04cec8b74a5f1}{create}}(asio::io\_context \&io\_context, \mbox{\hyperlink{classAsioTcpServ}{AsioTcpServ}} \&servRef, \textcolor{keywordtype}{int} \textcolor{keywordtype}{id}, \textcolor{keywordtype}{bool} debug) \{}
\DoxyCodeLine{38         \textcolor{keywordflow}{return} \mbox{\hyperlink{UserConnection_8hpp_a753e7540e06be2c96dffa1a345fa805f}{userConnectionPointer}}(\textcolor{keyword}{new} \mbox{\hyperlink{classUserConnection}{UserConnection}}(io\_context, servRef, \textcolor{keywordtype}{id}, debug));}
\DoxyCodeLine{39     \}}
\DoxyCodeLine{40 }
\DoxyCodeLine{46     asio::ip::tcp::socket \&\mbox{\hyperlink{classUserConnection_ab2199c72acc7ed96e2b4989fdab2cdea}{getSocket}}();}
\DoxyCodeLine{47 }
\DoxyCodeLine{53     \textcolor{keywordtype}{int} \mbox{\hyperlink{classUserConnection_a30d46663467bcfa757c113f982e21f32}{getId}}() \textcolor{keyword}{const};}
\DoxyCodeLine{54 }
\DoxyCodeLine{59     \textcolor{keywordtype}{void} \mbox{\hyperlink{classUserConnection_a63405d60679289be553264578c35a449}{startCommunication}}();}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{keyword}{protected}:}
\DoxyCodeLine{63 \textcolor{keyword}{private}:}
\DoxyCodeLine{64     \mbox{\hyperlink{classUserConnection}{UserConnection}}(asio::io\_context \&io\_context, \mbox{\hyperlink{classAsioTcpServ}{AsioTcpServ}} \&servRef, \textcolor{keywordtype}{int} \textcolor{keywordtype}{id}, \textcolor{keywordtype}{bool} debug);}
\DoxyCodeLine{65     \textcolor{keyword}{typedef} void (\mbox{\hyperlink{classUserConnection}{UserConnection}}::*factoryF)(\textcolor{keyword}{const} std::vector<std::string> \&arg);}
\DoxyCodeLine{66 }
\DoxyCodeLine{67     \textcolor{keywordtype}{void} handleWrite(\textcolor{keyword}{const} asio::error\_code \&err, \textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{68     \textcolor{keywordtype}{void} handleRead(\textcolor{keyword}{const} asio::error\_code \&error, \textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{69     \textcolor{keywordtype}{void} sendError(\textcolor{keywordtype}{int} code, \textcolor{keyword}{const} std::string \&msg);}
\DoxyCodeLine{70     \textcolor{keywordtype}{void} broadcastTCP(\textcolor{keyword}{const} std::string \&msg) \textcolor{keyword}{const};}
\DoxyCodeLine{71     \textcolor{keywordtype}{void} broadcastTCPNotUser(\textcolor{keyword}{const} std::string \&msg) \textcolor{keyword}{const};}
\DoxyCodeLine{72     \textcolor{keywordtype}{void} checkDisconnection() \textcolor{keyword}{const};}
\DoxyCodeLine{73     \textcolor{keywordtype}{bool} isUsernameAvailable(\textcolor{keyword}{const} std::string \&username) \textcolor{keyword}{const};}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     std::string getUsername() \textcolor{keyword}{const};}
\DoxyCodeLine{76 }
\DoxyCodeLine{78     \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/CMD\_RESPONSES-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\///}}
\DoxyCodeLine{80 \textcolor{comment}{}}
\DoxyCodeLine{81     \textcolor{keywordtype}{void} cmdConnection(\textcolor{keyword}{const} std::vector<std::string> \&arg);}
\DoxyCodeLine{82     \textcolor{keywordtype}{void} cmdCreateRoom(\textcolor{keyword}{const} std::vector<std::string> \&arg);}
\DoxyCodeLine{83     \textcolor{keywordtype}{void} cmdJoinRoom(\textcolor{keyword}{const} std::vector<std::string> \&arg);}
\DoxyCodeLine{84     \textcolor{keywordtype}{void} cmdQuitRoom(\textcolor{keyword}{const} std::vector<std::string> \&arg);}
\DoxyCodeLine{85     \textcolor{keywordtype}{void} cmdDeleteRoom(\textcolor{keyword}{const} std::vector<std::string> \&arg);}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     std::map<int, factoryF> \_cmd;}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     asio::ip::tcp::socket \_socket;}
\DoxyCodeLine{90     asio::streambuf \_message;}
\DoxyCodeLine{91     std::string \_finalMessage;}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     \textcolor{keywordtype}{int} \_id;}
\DoxyCodeLine{94     std::string \_userName;}
\DoxyCodeLine{95     \textcolor{keywordtype}{bool} \_isUDPOn;}
\DoxyCodeLine{96     \textcolor{keywordtype}{bool} \_debug;}
\DoxyCodeLine{97     \textcolor{keywordtype}{int} \_roomId;}
\DoxyCodeLine{98     \mbox{\hyperlink{classAsioTcpServ}{AsioTcpServ}} *\_servRef;}
\DoxyCodeLine{99 \};}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* !TCPCONNECTION\_HPP */}\textcolor{preprocessor}{}}

\end{DoxyCode}
